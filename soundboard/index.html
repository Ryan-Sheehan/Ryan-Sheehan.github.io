<!DOCTYPE html>
	<html>
		<head>
			<title>Soundboard</title>
			<!-- link to main stylesheet -->
			<link rel="stylesheet" type="text/css" href="/css/soundboard.css">
		</head>
		<body>
			<div class="header-box">
				<header>
					<nav>
					<ul>
						<li><a href="/">Home</a></li>
						<li><a href="/about">About</a></li>
						<li><a href="/cv">CV</a></li>
						<li><a href="/blog">Blog</a></li>
						<li><a href="/other">Other</a></li>
					</ul>
					</nav>
				</header>
			</div>

			<div class="container">

			<div class="keys">
				  <table>
				    <tbody>
				      <td>
					<div data-key="65" class="key">
						<kbd>A</kbd>
						<span class="sound"></span>
					</div>
				      </td>
				      <td>
					<div data-key="83" class="key">
						<kbd>S</kbd>
						<span class="sound"></span>
					</div>
				      </td>
				      <td>
					<div data-key="68" class="key">
						<kbd>D</kbd>
						<span class="sound"></span>
					</div>
				      </td>
				      <td>
					<div data-key="70" class="key">
						<kbd>F</kbd>
						<span class="sound"></span>
					</div>
				      </td>
				      <td>
					<div data-key="71" class="key">
						<kbd>G</kbd>
						<span class="sound"></span>
					</div>
				      </td>
				      <td>
					<div data-key="72" class="key">
						<kbd>H</kbd>
						<span class="sound"></span>
					</div>
				      </td>
				      <td>
					<div data-key="74" class="key">
						<kbd>J</kbd>
						<span class="sound"></span>
				      </td>
				    </tbody>
				  </table>
			</div>
	<audio preload="auto" data-key="65" src="https://cdn.rawgit.com/Ryan-Sheehan/Ryan-Sheehan.github.io/facfc794/soundboard/Misc%20Sounds/Spongebob%20MY%20LEG!%20%20Sound%20effect.mp3"></audio>
	<audio preload="auto" data-key="83" src="https://raw.githubusercontent.com/Misc Sounds/Hey thats pretty good.mp3"></audio>
	<audio preload="auto" data-key="68" src="https://raw.githubusercontent.com/Misc Sounds/PizzaBall.mp3"></audio>
	<audio preload="auto" data-key="70" src="https://raw.githubusercontent.com/Misc Sounds/Boo.mp3"></audio>
	<audio preload="auto" data-key="71" src="https://raw.githubusercontent.com/Misc Sounds/Cat Call.mp3"></audio>
	<audio preload="auto" data-key="72" src="https://raw.githubusercontent.com/Misc Sounds/Wilhelm.mp3"></audio>
	<audio preload="auto" data-key="74" src="https://raw.githubusercontent.com/Misc Sounds/Buzzer.mp3"></audio>


	<script>
		
		function playSound(e) {
		//audio[data-key="${e.keyCode}"] wasn't working for some reason so this is the best I could muster
			var audio, key;
	    		switch(e.keyCode){
	    	case 65:
	    		audio = document.querySelector(`audio[data-key="65"]`);
	    		key = document.querySelector(`.key[data-key="65"]`);
	    	break;
	    	case 83:
	    		audio = document.querySelector(`audio[data-key="83"]`);
	    		key = document.querySelector(`.key[data-key="83"]`);
	    	break;
	    	case 68:
	    		audio = document.querySelector(`audio[data-key="68"]`);
	    		key = document.querySelector(`.key[data-key="68"]`);
	    	break;
	    	case 70:
	    		audio = document.querySelector(`audio[data-key="70"]`);
	    		key = document.querySelector(`.key[data-key="70"]`);
	    	break;
	    	case 71:
	    		audio = document.querySelector(`audio[data-key="71"]`);
	    		key = document.querySelector(`.key[data-key="71"]`);
	    	break;
	    	case 72:
	    		audio = document.querySelector(`audio[data-key="72"]`);
	    		key = document.querySelector(`.key[data-key="72"]`);
	    	break;
	    	case 74:
	    		audio = document.querySelector(`audio[data-key="74"]`);
	    		key = document.querySelector(`.key[data-key="74"]`);
	    	break;

	    }
		
	    var playPromise = document.querySelector('video').play();


            if (playPromise !== undefined) {
	    	playPromise.then(function() {
		// Automatic playback started
	    }).catch(function(error) {
		// Automatic playback failed.
		// Show a UI element to let the user manually start playback.
   	    });
	    }
		
	    console.log(audio);
	    console.log(key);
	    if(!audio) return; //stops the function from running if the key pressed has no audio associated with it
	    key.classList.add('playing');
	    audio.currentTime = 0; // rewinds to the beginning (in case audio hadn't finished by the time a new keydown event occurs)
	    audio.play();
	    
	 }

	  function removeTransition(e) {
	  	if(e.propertyName !== 'transform');
	  	this.classList.remove('playing');
	  }

	  const keys = Array.from(document.querySelectorAll('.key'));
	  keys.forEach(key => key.addEventListener('transitionend', removeTransition));
	  window.addEventListener('keydown', playSound);
	</script>

			</div><!-- /.container -->
			<footer>
	    		<ul>
	        		<li><a href="mailto:sheehan.w.ryan@gmail.com">email</a></li>
	        		<li><a href="https://github.com/Ryan-Sheehan">github.com/Ryan-Sheehan</a></li>
				</ul>
			</footer>
		</body>
	</html>

